(this.webpackJsonpmessaging_app_project=this.webpackJsonpmessaging_app_project||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n,s=a(0),r=a.n(s),c=a(31),o=a.n(c),i=a(2),u=a.n(i),l=a(9),m=a(4),p=a(5),h=a(7),d=a(6),f=a(10),b=a(3),g=a(60),v=a(19),k=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"inputField"},r.a.createElement("input",{className:"input",type:this.props.type,placeholder:this.props.placeholder,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},onKeyPress:this.keyPress}))}}]),a}(r.a.Component),y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"submitButton"},r.a.createElement("button",{className:"btn",disabled:this.props.disabled,onClick:function(){return e.props.onClick()}},this.props.text))}}]),a}(r.a.Component),j=(a(67),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",buttonDisabled:!1},n}return Object(p.a)(a,[{key:"resetForm",value:function(){this.setState({username:"",password:"",buttonDisabled:!1})}},{key:"setInputValue",value:function(e,t){(t=t.trim()).length>20||this.setState(Object(v.a)({},e,t))}},{key:"doLogin",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.username){e.next=2;break}return e.abrupt("return");case 2:if(this.state.password){e.next=4;break}return e.abrupt("return");case 4:return this.setState({buttonDisabled:!0}),e.prev=5,e.next=8,fetch("/login",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})});case 8:return t=e.sent,e.next=11,t.json();case 11:(a=e.sent)&&a.success?(localStorage.setItem("token","T"),localStorage.setItem("userID",a.username)):a&&!1===a.success&&(localStorage.removeItem("token"),this.resetForm(),alert(a.msg)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0),localStorage.removeItem("token"),this.resetForm();case 20:case"end":return e.stop()}}),e,this,[[5,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"loginform"},"HEX CHAT",r.a.createElement(k,{type:"text",placeholder:"username",value:this.state.username?this.state.username:"",onChange:function(t){return e.setInputValue("username",t)}}),r.a.createElement(k,{type:"password",placeholder:"password",value:this.state.password?this.state.password:"",onChange:function(t){return e.setInputValue("password",t)}}),r.a.createElement(f.b,{to:"/home"},r.a.createElement(y,{text:"Login",disabled:this.state.buttonDisabled,onClick:function(){return e.doLogin()}})),r.a.createElement(f.b,{to:"/createLogin"},r.a.createElement(y,{text:"Create Login",disabled:!1}))))}}]),a}(r.a.Component)),x=(a(72),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={new_username:"",new_password:"",firstName:"",lastName:"",emailAddress:"",buttonDisabled:!1,createLogin:!0},n}return Object(p.a)(a,[{key:"resetForm",value:function(){this.setState({new_username:"",new_password:"",firstName:"",lastName:"",emailAddress:"",buttonDisabled:!1})}},{key:"setInputValue",value:function(e,t){(t=t.trim()).length>20||this.setState(Object(v.a)({},e,t))}},{key:"submitNewLogin",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.new_username){e.next=2;break}return e.abrupt("return");case 2:if(this.state.new_password){e.next=4;break}return e.abrupt("return");case 4:if(this.state.firstName){e.next=6;break}return e.abrupt("return");case 6:if(this.state.lastName){e.next=8;break}return e.abrupt("return");case 8:if(this.state.emailAddress){e.next=10;break}return e.abrupt("return");case 10:return this.setState({buttonDisabled:!0}),e.prev=11,e.next=14,fetch("/createLogin",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({new_username:this.state.new_username,new_password:this.state.new_password,firstName:this.state.firstName,lastName:this.state.lastName,emailAddress:this.state.emailAddress})});case 14:return t=e.sent,e.next=17,t.json();case 17:(a=e.sent)&&a.success?this.setState({createLogin:!0}):a&&!1===a.success&&(this.resetForm(),alert(a.msg)),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(11),console.log(e.t0),this.resetForm();case 25:case"end":return e.stop()}}),e,this,[[11,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"CreateLoginForm"},"HEX CHAT",r.a.createElement(k,{type:"text",placeholder:"New Username",value:this.state.new_username?this.state.new_username:"",onChange:function(t){return e.setInputValue("new_username",t)}}),r.a.createElement(k,{type:"password",placeholder:"New password",value:this.state.new_password?this.state.new_password:"",onChange:function(t){return e.setInputValue("new_password",t)}}),r.a.createElement(k,{type:"text",placeholder:"First Name",value:this.state.firstName?this.state.firstName:"",onChange:function(t){return e.setInputValue("firstName",t)}}),r.a.createElement(k,{type:"text",placeholder:"Last Name",value:this.state.lastName?this.state.lastName:"",onChange:function(t){return e.setInputValue("lastName",t)}}),r.a.createElement(k,{type:"text",placeholder:"Email Address",value:this.state.emailAddress?this.state.emailAddress:"",onChange:function(t){return e.setInputValue("emailAddress",t)}}),r.a.createElement(f.b,{to:"/"},r.a.createElement(y,{text:"Submit",disabled:this.state.buttonDisabled,onClick:function(){return e.submitNewLogin()}})),r.a.createElement(f.b,{to:"/"},r.a.createElement(y,{text:"Go back",disabled:!1,onClick:function(){return e.setState({createLogin:!1})}}))))}}]),a}(r.a.Component)),E=a(59),w=a.n(E),C=(a(103),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"renderMessage",value:function(e){var t=e.member,a=e.content,n=this.props.currentMember,s=t.username===n.username?"Messages-message currentMember":"Messages-message";return r.a.createElement("li",{key:20*Math.random(),className:s},r.a.createElement("span",{className:"avatar",style:{backgroundColor:t.color}}),r.a.createElement("div",{className:"Message-content"},r.a.createElement("div",{className:"username"},t.username),r.a.createElement("div",{className:"text"},a)))}},{key:"render",value:function(){var e=this,t=this.props.messages;return r.a.createElement("ul",{className:"messages-list"},t.map((function(t){return e.renderMessage(t)})))}}]),a}(r.a.Component)),N=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={text:""},e}return Object(p.a)(a,[{key:"onChange",value:function(e){this.setState({text:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({text:""}),this.props.onSendMessage(this.state.text)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sendMsg"},r.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("input",{onChange:function(t){return e.onChange(t)},value:this.state.text,placeholder:this.props.placeholder,autoFocus:!0})))}}]),a}(r.a.Component),S=(a(104),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={userList:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/contacts",{method:"post",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent)&&a.success&&(console.log(a.users),this.setState({userList:a.users})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.userList),r.a.createElement("div",{className:"list"},r.a.createElement("ul",{className:"list-group",id:"contact-list"},r.a.createElement("p",null,"Contacts"),this.state.userList.map((function(e){return r.a.createElement("li",{key:20*Math.random(),className:"list-group-item"},e.username)}))))}}]),a}(r.a.Component)),I=(a(105),a(106),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).onSendMessage=function(e){var t=s.state.messages;t.push({content:e,member:s.state.member}),console.log(t),n.emit("message",t,s.state.currentChatId),s.setState({messages:t})},s.state={isLogout:!1,loading:!0,buttonDisabled:!1,manageAcct:!1,messages:[],member:{username:localStorage.getItem("userID"),color:s.randomColor()},id:s.findID(),currentChatId:"",userEntry:""},s}return Object(p.a)(a,[{key:"componentDidMount",value:function(){n=w()("localhost:5000");var e=this.state.member.username;n.emit("login",e)}},{key:"componentDidUpdate",value:function(){var e=this;n.on("message",(function(t,a){e.setState({currentChatId:a}),console.log(e.state.currentChatId),e.setState({messages:t})}))}},{key:"componentWillUnmount",value:function(){n.emit("logout",this.state.id)}},{key:"doLogout",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent)&&a.success?(localStorage.removeItem("token"),localStorage.removeItem("UserID"),this.setState({isLogout:!0})):(localStorage.removeItem("token"),localStorage.removeItem("UserID")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"findID",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/getID",{method:"post",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).success&&null!=a.id&&(this.setState({id:a.id}),console.log(a.id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"manageAcct",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({buttonDisabled:!0}),this.setState({manageAcct:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomColor",value:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}},{key:"setInputValue",value:function(e,t){t=t.trim(),this.setState(Object(v.a)({},e,t))}},{key:"saveReciptient",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/findID",{method:"post",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({recipient:this.state.currentChatId})});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).username===this.state.currentChatId?(this.setState({currentChatId:this.state.currentChatId}),this.setState({buttonDisabled:!0})):alert(a.msg),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"exit",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({buttonDisabled:!1}),this.setState({messages:[]}),this.setState({currentChatId:""});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.isLogout?r.a.createElement(b.a,{to:"/"}):r.a.createElement("div",{className:"HomePage"},r.a.createElement("div",{className:"contacts"},r.a.createElement(S,null)),r.a.createElement("div",{className:"MessageFeed"},r.a.createElement(C,{messages:this.state.messages,currentMember:this.state.member}),r.a.createElement(N,{onSendMessage:this.onSendMessage,placeholder:"Enter a message... "})),r.a.createElement("div",{className:"userEntry",align:"center"},r.a.createElement(k,{type:"text",placeholder:"Search User",value:this.state.currentChatId?this.state.currentChatId:"",onChange:function(t){return e.setInputValue("currentChatId",t)}}),r.a.createElement(y,{text:"Start Chat",disabled:this.state.buttonDisabled,onClick:function(){return e.saveReciptient()}}),r.a.createElement(y,{text:"Exit Conversation",disabled:!1,onClick:function(){return e.exit()}})),r.a.createElement("div",{className:"accountButtons"},r.a.createElement(f.b,{to:"/manageAcct"},r.a.createElement(y,{text:"Manage Account",disabled:!1,onClick:function(){return e.manageAcct()}})),r.a.createElement(f.b,{to:"/"},r.a.createElement(y,{text:"Log out",disabled:this.state.buttonDisabled,onClick:function(){return e.doLogout()}}))))}}]),a}(r.a.Component)),O=(a(107),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={change_username:"",change_password:"",firstName:"",lastName:"",emailAddress:"",buttonDisabled:!1,isLogout:!1},n}return Object(p.a)(a,[{key:"deleteAcct",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/delete",{method:"post",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent)&&a.success?(alert(a.msg),this.doLogout()):alert(a.msg),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"doLogout",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent)&&a.success?(localStorage.removeItem("token"),localStorage.removeItem("UserID"),this.setState({isLogout:!0})):(localStorage.removeItem("token"),localStorage.removeItem("UserID")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"resetForm",value:function(){this.setState({change_username:"",change_password:"",firstName:"",lastName:"",emailAddress:"",buttonDisabled:!1})}},{key:"setInputValue",value:function(e,t){(t=t.trim()).length>20||this.setState(Object(v.a)({},e,t))}},{key:"updateLogin",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.change_username){e.next=2;break}return e.abrupt("return");case 2:if(this.state.change_password){e.next=4;break}return e.abrupt("return");case 4:if(this.state.firstName){e.next=6;break}return e.abrupt("return");case 6:if(this.state.lastName){e.next=8;break}return e.abrupt("return");case 8:if(this.state.emailAddress){e.next=10;break}return e.abrupt("return");case 10:return this.setState({buttonDisabled:!0}),e.prev=11,e.next=14,fetch("/manageAcct",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({change_username:this.state.change_username,change_password:this.state.change_password,firstName:this.state.firstName,lastName:this.state.lastName,emailAddress:this.state.emailAddress})});case 14:return t=e.sent,e.next=17,t.json();case 17:(a=e.sent)&&a.success?(alert(a.msg),this.resetForm(),this.doLogout()):a&&!1===a.success&&(this.resetForm(),alert(a.msg)),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(11),console.log(e.t0),this.resetForm();case 25:case"end":return e.stop()}}),e,this,[[11,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},"Please fill ALL fields (if not applicable to change just type in what it is).",r.a.createElement("div",{className:"ManageAcct"},r.a.createElement(k,{type:"text",placeholder:"Update Username",value:this.state.change_username?this.state.change_username:"",onChange:function(t){return e.setInputValue("change_username",t)}}),r.a.createElement(k,{type:"password",placeholder:"Update password",value:this.state.change_password?this.state.change_password:"",onChange:function(t){return e.setInputValue("change_password",t)}}),r.a.createElement(k,{type:"text",placeholder:"First Name",value:this.state.firstName?this.state.firstName:"",onChange:function(t){return e.setInputValue("firstName",t)}}),r.a.createElement(k,{type:"text",placeholder:"Last Name",value:this.state.lastName?this.state.lastName:"",onChange:function(t){return e.setInputValue("lastName",t)}}),r.a.createElement(k,{type:"text",placeholder:"Email Address",value:this.state.emailAddress?this.state.emailAddress:"",onChange:function(t){return e.setInputValue("emailAddress",t)}}),r.a.createElement(y,{text:"Update",disabled:this.state.buttonDisabled,onClick:function(){return e.updateLogin()}}),r.a.createElement(f.b,{to:"/"},r.a.createElement(y,{text:"Delete Account",disabled:this.state.buttonDisabled,onClick:function(){return e.deleteAcct()}})),r.a.createElement(f.b,{to:"/home"},r.a.createElement(y,{text:"Go back",disabled:this.state.buttonDisabled}))))}}]),a}(r.a.Component)),A=a(61),D=function(e){var t=e.children,a=Object(A.a)(e,["children"]);return r.a.createElement(b.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem("token")?t:r.a.createElement(b.a,{to:{pathname:"/",state:{from:a}}})}}))},L=(a(108),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isLoggedIn:!1},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/isloggedIn",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if((a=e.sent)&&a.success){if(n=localStorage.getItem("token"),this.setState({isLoggedIn:!0}),n)try{this.setState(JSON.parse(n))}catch(s){}}else this.setState({isLoggedIn:!1}),localStorage.removeItem("token"),localStorage.removeItem("userID");e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),this.setState({isLoggedIn:!1}),localStorage.removeItem("token"),localStorage.removeItem("userID");case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(b.b,{path:"/",exact:!0,component:j}),r.a.createElement(b.b,{path:"/createLogin",exact:!0,component:x}),r.a.createElement(D,{path:"/home"},r.a.createElement(I,null)),r.a.createElement(D,{path:"/manageAcct"},r.a.createElement(O,null)))}}]),a}(r.a.Component)),_=Object(g.a)(L);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root"))},67:function(e,t,a){},72:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.27d9533e.chunk.js.map